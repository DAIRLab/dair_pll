<?xml version="1.0" ?>
<robot name="cube" 
  xmlns:xacro="http://www.ros.org/wiki/xacro"
  xmlns:drake="https://drake.mit.edu/">

    <xacro:arg name="mass" default="0.5" />
    <xacro:property name="mass" value="$(arg mass)" />
    <xacro:arg name="length_x" default="0.1" />
    <xacro:property name="length_x" value="$(arg length_x)" />
    <xacro:arg name="length_y" default="0.1" />
    <xacro:property name="length_y" value="$(arg length_y)" />
    <xacro:arg name="length_z" default="0.1" />
    <xacro:property name="length_z" value="$(arg length_z)" />
    <xacro:arg name="mu" default="0.05" />
    <link name="cube_body">
        <inertial>
            <origin xyz="0 0 0" rpy="0 0 0"/>
            <mass value="${mass}" />
            <inertia
                ixx="${1.0/12.0 * mass * (length_y*length_y + length_z*length_z)}"
                ixy="0"
                ixz="0"
                iyy="${1.0/12.0 * mass * (length_x*length_x + length_z*length_z)}"
                iyz="0"
                izz="${1.0/12.0 * mass * (length_y*length_y + length_x*length_x)}"/>
        </inertial>
        <visual>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <geometry>
                <box size="${length_x} ${length_y} ${length_z}"/>
            </geometry>
            <material name="pennred">
                <color rgba="0.6 0 0 1.0" />
            </material>
        </visual>
        <collision>
            <geometry>
                <box size="${length_x} ${length_y} ${length_z}"/>
            </geometry>
            <origin xyz="0 0 0" rpy="0 0 0" />
            <drake:proximity_properties>
                <drake:mu_static value="$(arg mu)" />
                <drake:rigid_hydroelastic />
                <drake:mesh_resolution_hint value="0.001" />
                <drake:point_contact_stiffness value="10800.0" />
                <drake:hunt_crossley_dissipation value="0.4" />
            </drake:proximity_properties>
        </collision>
    </link>

    <!-- Define the global worldfixed if we are using a planar_xz
            Note: It is hard-coded in PLL right now to weld worldfixed to Drake world.
    -->
    <xacro:arg name="is_worldfixed" default="true" />
    <xacro:if value="$(arg is_worldfixed)">
      <xacro:property name="global_frame" value="worldfixed" />
    </xacro:if>
    <xacro:unless value="$(arg is_worldfixed)">
      <xacro:property name="global_frame" value="worldfloat" />
    </xacro:unless>

    <xacro:arg name="planar_xz" default="false" />
    <xacro:if value="$(arg planar_xz)">
      <link name="${global_frame}" />
      <joint name="world_to_cube_body" type="planar">
          <parent link="${global_frame}"/>
          <child link="cube_body"/>
          <axis xyz="0 -1 0"/>
      </joint>
    </xacro:if>
</robot>